!function(t){function e(){var t=document.createElement("p"),e=!1;if(t.addEventListener)t.addEventListener("DOMAttrModified",function(){e=!0},!1);else{if(!t.attachEvent)return!1;t.attachEvent("onDOMAttrModified",function(){e=!0})}return t.setAttribute("id","target"),e}function o(e,o){if(e){var n=this.data("attr-old-value");if(o.attributeName.indexOf("style")>=0){n.style||(n.style={});var a=o.attributeName.split(".");o.attributeName=a[0],o.oldValue=n.style[a[1]],o.newValue=a[1]+":"+this.prop("style")[t.camelCase(a[1])],n.style[a[1]]=o.newValue}else o.oldValue=n[o.attributeName],o.newValue=this.attr(o.attributeName),n[o.attributeName]=o.newValue;this.data("attr-old-value",n)}}var n=window.MutationObserver||window.WebKitMutationObserver;t.fn.attrchange=function(a,i){if("object"==typeof a){var s={trackValues:!1,callback:t.noop};if("function"==typeof a?s.callback=a:t.extend(s,a),s.trackValues&&this.each(function(e,o){for(var n,a={},e=0,i=o.attributes,s=i.length;e<s;e++)a[(n=i.item(e)).nodeName]=n.value;t(this).data("attr-old-value",a)}),n){var r={subtree:!1,attributes:!0,attributeOldValue:s.trackValues},c=new n(function(e){e.forEach(function(e){var o=e.target;s.trackValues&&(e.newValue=t(o).attr(e.attributeName)),"connected"===t(o).data("attrchange-status")&&s.callback.call(o,e)})});return this.data("attrchange-method","Mutation Observer").data("attrchange-status","connected").data("attrchange-obs",c).each(function(){c.observe(this,r)})}return e()?this.data("attrchange-method","DOMAttrModified").data("attrchange-status","connected").on("DOMAttrModified",function(e){e.originalEvent&&(e=e.originalEvent),e.attributeName=e.attrName,e.oldValue=e.prevValue,"connected"===t(this).data("attrchange-status")&&s.callback.call(this,e)}):"onpropertychange"in document.body?this.data("attrchange-method","propertychange").data("attrchange-status","connected").on("propertychange",function(e){e.attributeName=window.event.propertyName,o.call(t(this),s.trackValues,e),"connected"===t(this).data("attrchange-status")&&s.callback.call(this,e)}):this}if("string"==typeof a&&t.fn.attrchange.hasOwnProperty("extensions")&&t.fn.attrchange.extensions.hasOwnProperty(a))return t.fn.attrchange.extensions[a].call(this,i)}}(jQuery);var FavoritesAdmin=FavoritesAdmin||{};FavoritesAdmin.Settings=function(){var t=this,e=jQuery;return t.bindEvents=function(){e(document).ready(function(){t.toggleButtonTypes(),t.toggleAnonymousSave(),t.toggleLoadingTypeLoad(),t.toggleAnonymousSettings(),t.toggleCustomColorOptions(),t.enableColorPickers(),t.toggleButtonPreviewColors(),t.toggleCountOptions(),e.each(e("[data-favorites-dependency-checkbox]"),function(){var o=e(this).parents(".field");t.toggleDependencyContent(o)}),e(".wp-color-result").attrchange({callback:function(){t.toggleButtonPreviewColors()}})}),e(document).on("change","[data-favorites-dependency-checkbox]",function(){var o=e(this).parents(".field");t.toggleDependencyContent(o)}),e(document).on("change","*[data-favorites-anonymous-checkbox]",function(){t.toggleAnonymousSave(),t.toggleAnonymousSettings()}),e(document).on("change","[data-favorites-anonymous-settings]",function(){t.toggleAnonymousSettings(e(this))}),e(document).on("change","*[data-favorites-posttype-checkbox]",function(){t.togglePostTypeOptionsButtons()}),e(document).on("click","[data-favorites-toggle-post-type-settings]",function(o){o.preventDefault(),t.togglePostTypeOptions(e(this))}),e(document).on("change","[data-favorites-spinner-type]",function(){t.toggleLoadingType(e(this))}),e(document).on("change","[data-favorites-preset-button-select]",function(){t.toggleButtonTypes()}),e(document).on("click","[data-favorites-button-preview]",function(o){o.preventDefault(),t.togglePreviewButtonState(e(this))}),e(document).on("change","[data-favorites-include-count-checkbox]",function(){t.toggleCountOptions()}),e(document).on("change","[data-favorites-custom-colors-checkbox]",function(){t.toggleCustomColorOptions()}),e(document).on("change","[data-favorites-button-shadow]",function(){t.toggleButtonPreviewColors()}),e(document).on("change","[data-favorites-color-picker]",function(){t.toggleButtonPreviewColors()})},t.togglePostTypeOptions=function(t){e(t).parents(".post-type-row").find(".post-type-settings").toggle(),e(t).toggleClass("button-primary")},t.togglePostTypeOptionsButtons=function(){var t=e("[data-favorites-posttype-checkbox]");e.each(t,function(){var t=!!e(this).is(":checked"),o=e(this).parents(".post-type-row"),n=e(o).find("[data-favorites-toggle-post-type-settings]");t?e(n).show():(e(n).hide(),e(o).find(".post-type-settings").hide())})},t.toggleDependencyContent=function(t){e(t).find("[data-favorites-dependency-checkbox]").is(":checked")?e(t).find("[data-favorites-dependency-content]").hide():e(t).find("[data-favorites-dependency-content]").show()},t.toggleAnonymousSave=function(){if(e("[data-favorites-anonymous-checkbox]").is(":checked"))return e("[data-favorites-anonymous-count]").show(),void e("[data-favorites-require-login]").hide().find('input[type="checkbox"]').attr("checked",!1);e("[data-favorites-anonymous-count]").hide().find('input[type="checkbox"]').attr("checked",!1),e("[data-favorites-require-login]").show()},t.toggleAnonymousSettings=function(o){if(void 0===o||""===o){var n=e("[data-favorites-anonymous-settings]");e.each(n,function(){t.toggleAnonymousSettings(e(this))})}var a=e(o).attr("data-favorites-anonymous-settings");return"modal"===a&&e(o).is(":checked")?(e("[data-favorites-authentication-modal-content]").show(),e("[data-favorites-anonymous-redirect-content]").hide(),void e('[data-favorites-anonymous-settings="redirect"]').attr("checked",!1)):"redirect"===a&&e(o).is(":checked")?(e("[data-favorites-anonymous-redirect-content]").show(),e("[data-favorites-authentication-modal-content]").hide(),void e('[data-favorites-anonymous-settings="modal"]').attr("checked",!1)):(e('[data-favorites-anonymous-settings="redirect"]').is(":checked")||e("[data-favorites-anonymous-redirect-content]").hide(),void(e('[data-favorites-anonymous-settings="modal"]').is(":checked")||e("[data-favorites-authentication-modal-content]").hide()))},t.toggleLoadingTypeLoad=function(){var t=e('[data-favorites-spinner-type="image"]');e(t).is(":checked")?e('[data-favorites-spinner-type="html"]').attr("checked",!1):e('[data-favorites-spinner-type="image"]').attr("checked",!1)},t.toggleLoadingType=function(t){"image"!==e(t).attr("data-favorites-spinner-type")?e('[data-favorites-spinner-type="image"]').attr("checked",!1):e('[data-favorites-spinner-type="html"]').attr("checked",!1)},t.togglePreviewButtonState=function(o){e(o).toggleClass("active");var n=e(o).attr("data-favorites-button-icon"),a=e(o).attr("data-favorites-button-active-content"),i=e(o).attr("data-favorites-button-default-content"),s=n+" "+(e(o).hasClass("active")?a:i);e("[data-favorites-include-count-checkbox]").is(":checked")&&(s+=' <span class="simplefavorite-button-count">2</span>'),e(o).html(s),setTimeout(function(){t.toggleButtonPreviewColors()},10)},t.toggleButtonTypes=function(){var t=e("[data-favorites-preset-button-select]").val(),o=e("[data-favorites-preset-button-previews]"),n=e("[data-favorites-button-preview]"),a=e("[data-favorites-custom-button-option]");if("custom"===t)return e(o).hide(),void e(a).show();e(a).hide(),e(n).hide(),e(o).show(),e('[data-favorites-button-preview="'+t+'"]').show()},t.toggleCustomColorOptions=function(){var o=!!e("[data-favorites-custom-colors-checkbox]").is(":checked");t.toggleButtonPreviewColors(),o?e("[data-favorites-custom-colors-options]").show():e("[data-favorites-custom-colors-options]").hide()},t.enableColorPickers=function(){e("[data-favorites-color-picker]").wpColorPicker({change:function(e,o){setTimeout(function(){t.toggleButtonPreviewColors()},10)}})},t.toggleButtonPreviewColors=function(){var o=e("[data-favorites-button-preview]"),n=e("[data-favorites-button-preview]:visible");if(!e("[data-favorites-custom-colors-checkbox]").is(":checked"))return e(o).removeAttr("style"),void t.toggleButtonTypes();var a=e("[data-favorites-button-shadow]").is(":checked")?"":"none";e(o).css("box-shadow",a);var i=e(n).hasClass("active")?"_active":"_default";e(o).css("background-color",t.getCurrentColor("background"+i)),e(o).css("border-color",t.getCurrentColor("border"+i)),e(o).css("color",t.getCurrentColor("text"+i)),e(o).find("i").css("color",t.getCurrentColor("icon"+i)),e(o).find(".simplefavorite-button-count").css("color",t.getCurrentColor("count"+i))},t.getCurrentColor=function(t){var o=e('[data-favorites-color-picker="'+t+'"]');return value=e(o).val(),value},t.toggleCountOptions=function(){if(!!e("[data-favorites-include-count-checkbox]").is(":checked"))return e(".simplefavorite-button-count").show(),e('[data-favorites-color-option="count_default"]').show(),void e('[data-favorites-color-option="count_active"]').show();e(".simplefavorite-button-count").hide(),e('[data-favorites-color-option="count_default"]').hide(),e('[data-favorites-color-option="count_active"]').hide()},t.bindEvents()},(FavoritesAdmin=FavoritesAdmin||{}).ListingCustomizer=function(){var t=this,e=jQuery;return t.bindEvents=function(){e(document).ready(function(){t.toggleListingCustomizer()}),e(document).on("change","[data-favorites-listing-customizer-checkbox]",function(){t.toggleListingCustomizer()}),e(document).on("click","[data-favorites-listing-customizer-variable-button]",function(o){o.preventDefault(),t.addFieldToEditor(e(this))})},t.toggleListingCustomizer=function(){e("[data-favorites-listing-customizer-checkbox]").is(":checked")?e("[data-favorites-listing-customizer]").show():e("[data-favorites-listing-customizer]").hide()},t.addFieldToEditor=function(t){var o=e(t).siblings("select").val();tinymce.activeEditor.execCommand("mceInsertContent",!1,o)},t.bindEvents()},jQuery(document).ready(function(){new FavoritesAdmin.Factory}),(FavoritesAdmin=FavoritesAdmin||{}).selectors={},FavoritesAdmin.cssClasses={},FavoritesAdmin.jsData={},FavoritesAdmin.formActions={},FavoritesAdmin.Factory=function(){var t=this;jQuery;return t.build=function(){new FavoritesAdmin.Settings,new FavoritesAdmin.ListingCustomizer},t.build()};